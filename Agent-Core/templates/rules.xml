<!-- 
This file manages retrieving the user intention from the POS-tagger list

Template Dependencies:
    <none>
Dependent Managers: 
    <POSManager>
Dependent Behaviours:
    <none>
Dependent Functions:
    <none>
IS-Vars:
    $userstates.utterance.pos
    $userstates.intent.function
-Static
    $STATIC.agentstates.name
-Winger-Input:
    <none>
-Winger-Output:
    <none>
Schema files: 
    <none>
    -->
    

    <behaviourtemplates xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://github.com/hmi-utwente/FlipperMMDS C:\Users\Siewart\Documents\HMI\Flipper\target\classes\template.xsd">


        <!-- THIS ONE NEEDS TO BE CHANGED -MT -->              
        <template id="R30">
            <preconditions>
                <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
                <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
                <compare value1="$userstates.utterance.pos" comparator="contains" value2="information"/>
                <compare value1="$userstates.utterance.pos" comparator="contains" value2="chapter"/>
                <compare value1="$userstates.utterance.pos" comparator="contains" value2="3"/>
            </preconditions>        
            <effects> 
                <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
                <update name="$userstates.intent.function" value="setQuestion" />
                <update name="$userstates.intent.type" value="identity"/>
                <update name="$userstates.intent.subject" value="chapterThree"/>
    			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
            </effects>
        </template> 

        <template id="intro">
            <preconditions>
                <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
                <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
                <compare value1="$dialoguestates.state.value" value2="enter" />
            </preconditions>        
            <effects> 

              <update name="$dialoguestates.state.value" value="body" />
              <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
              <update name="$userstates.intent.function" value="longPause" />
  			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
          </effects>
      </template> 

      <template id="longpause">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.intent.ts" comparator="smaller_than" value2="$util.timestamp.now-15000" />
        </preconditions>
        <effects> 

          <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
          <update name="$userstates.intent.function" value="longPause" />
          <update name="$userstates.utterance.consumers._addlast" value="rules" />
      </effects>
  </template> 

  <!-- Unknown statement or question - MT -->       
  <template id="R23">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="information"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="unknown" />
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 

<!-- Question but not clear about what. NB: function.unknown is too general. We know it's a question! -->
<template id="R21_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="?"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="question"/>
        <update name="$userstates.intent.subject" value="unknown"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>     

<!-- "Nice to meet you" BUT THIS IS NOT A SELF-INTRODUCTION! MUST BE CORRECTED -MT 
        <template id="R25">
                            <preconditions>
                <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
                <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
                <compare value1="$userstates.utterance.pos" comparator="contains" value2="introduced"/>
                <compare value1="$userstates.utterance.pos" comparator="contains" value2="nice"/>
            </preconditions>        
            <effects> 
                           

<update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
                <update name="$userstates.intent.function" value="selfIntroduction" />
                <update name="$userstates.intent.sentiment" value="positive" />
            		<update name="$userstates.utterance.consumers._addlast" value="rules" />
	</effects>
        </template>
    -->

    <!-- Check question -->     
    <template id="R_General_1">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="really"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="posiCheck"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>

    <!-- User (dis)agreement --> 
    <template id="R26">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$dialoguestates.state.value" comparator="not_equals" value2="enter" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="yes"/>

        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="agreement"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>

    <template id="R27">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$dialoguestates.state.value" comparator="not_equals" value2="enter" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="no"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="disagreement"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>
    <!-- End user (dis)agreement --> 

    <!-- Expressing sad/happy emotions -->        
    <template id="R24">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="sad"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.emotion" value="sad"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template> 

    <template id="R24_1">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="happy"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.emotion" value="happy"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template> 
    <!-- End of expressing sad/happy emotions -->  

    <!-- User having negative or positive sentiment -->     
    <template id="R22_1">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="good"/>
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="no"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/>
            <update name="$userstates.intent.sentiment" value="negative"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template> 

    <template id="R22">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="good"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.sentiment" value="positive"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>  
    <!-- End sentiment -->      

    <!-- User mentions positive opinion about the information (no rule for negative opinion!) -->   
    <template id="R31_1">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="information"/>
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="good"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="inform"/>
            <update name="$userstates.intent.type" value="opinion"/>
            <update name="$userstates.intent.subject" value="information"/>
            <update name="$userstates.intent.sentiment" value="positive"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template> 

    <!-- User mentions opinion about the weather (bad/good) -->     
    <template id="R28">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="weather"/>
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="bad"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="inform"/>
            <update name="$userstates.intent.type" value="opinion"/>
            <update name="$userstates.intent.subject" value="weather"/>
            <update name="$userstates.intent.sentiment" value="negative"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>     

    <template id="R29">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="weather"/>
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="good"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="inform"/>
            <update name="$userstates.intent.type" value="opinion"/>
            <update name="$userstates.intent.subject" value="weather"/>
            <update name="$userstates.intent.sentiment" value="positive"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />

            
        </effects>
    </template>
    <!-- End weather -->

    <!-- Asking for agent's name -->         
    <template id="R8">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="information"/>
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="name"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="request" />
            <update name="$userstates.intent.subject" value="name"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>

    <!-- Thanks -->     
    <template id="R32">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="thank"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="thanking"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template> 

    <!-- Questions about IDENTITY only: Alice, Jabberwocky, King, Caucus race -->   

    <!-- Alice - changed to be able to ask her about herself. FOR SOME REASON THIS DOES NOT WORK!!! -MT -->
    <template id="R3">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <!--    <compare value1="$userstates.utterance.pos" comparator="contains" value2="information"/> -->
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="yourself"/>
        </preconditions>
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="setQuestion" />
            <update name="$userstates.intent.type" value="identity"/>
            <update name="$userstates.intent.subject" value="alice"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>
    <!-- End Alice (you) -->

    <!-- Jabberwocky -MT -->
    <template id="R13">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="jabberwocky"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="setQuestion" />
            <update name="$userstates.intent.type" value="identity"/>
            <update name="$userstates.intent.subject" value="jabberwocky"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>
    <!-- End Jabberwocky -->

    <!-- King -MT -->       
    <template id="R14">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="king"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="setQuestion" />
            <update name="$userstates.intent.type" value="identity"/>
            <update name="$userstates.intent.subject" value="king"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>
    <!-- End King -->       

    <!-- Caucus race -MT -->        
    <template id="R77">
        <preconditions>
            <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
            <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
            <compare value1="$userstates.utterance.pos" comparator="contains" value2="race"/>
        </preconditions>        
        <effects> 


            <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
            <update name="$userstates.intent.function" value="setQuestion" />
            <update name="$userstates.intent.type" value="identity"/>
            <update name="$userstates.intent.subject" value="caucusRace"/>
			<update name="$userstates.previousUtterance" value="$userstates.utterance"/>
			
			<update name="$agentstates.turn.want" value="true"/>
			<update name="$userstates.utterance.consumers._addlast" value="rules" />
        </effects>
    </template>
    <!-- End King -->   

<!-- Questions about identity and agent's opinion of Caterpillar / Duchess / Mad Hatter / 
Cheshire cat / dodo / dormouse / gryphon / Jabberwocky King / March hare / mock turtle / 
white rabbit / Wonderland  / mouse -->      

<!-- Caterpillar - MT -->
<template id="R6">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="caterpillar"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="caterpillar"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 

<template id="R6_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="caterpillar"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="caterpillar"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>     
<!-- end caterpillar - MT -->       


<!-- Duchess -MT -->    
<template id="R11"> <!-- R11 seems to be the same as R4 -MT -->
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="duchess"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="duchess"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R11_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="duchess"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="duchess"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>         
<!-- end Duchess -MT -->    


<!-- Mad Hatter -MT -->
<template id="R66">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mad"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="hatter"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="madhatter"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R66_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mad"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="hatter"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="madhatter"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>
<!-- End Mad Hatter -MT -->

<!-- Cheshire cat -MT -->
<template id="R7">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="cheshire"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="cheshire"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R7_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="cheshire"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="cheshire"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>       
<!-- End Cheshire cat -->

<!-- Dodo -MT -->          
<template id="R9">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="dodo"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="dodo"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R9_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="dodo"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="dodo"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>
<!-- End dodo --> 

<!-- Dormouse -MT -->   
<template id="R10">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="dormouse"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="dormouse"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R10_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="dormouse"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="dormouse"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>       
<!-- End dormouse -MT -->

<!-- gryphon -MT -->     
<template id="R12">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="gryphon"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="gryphon"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 

<template id="R12_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="gryphon"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="gryphon"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 
<!-- End gryphon -->

<!-- March Hare -MT -->        
<template id="R15">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="march"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="hare"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="marchhare"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R15_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="march"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="hare"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="marchhare"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>     
<!-- End March Hare -->

<!-- Mock turtle -MT -->
<template id="R16_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mockturtle"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="mockturtle"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R16">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mockturtle"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="mockturtle"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R16_2">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mock"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="turtle"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="mockturtle"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R16_3">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mock"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="turtle"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="mockturtle"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>     
<!-- End mock turtle -->

<!--  Queen -MT -->
<template id="R18">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="queen"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="queen"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 

<template id="R18_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="queen"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="queen"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>
<!-- End Queen -->        

<!-- White rabbit -MT -->        
<template id="R19_2">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="white"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="rabbit"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="whiteRabbit"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template> 

<template id="R19_3">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="white"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="rabbit"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="whiteRabbit"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>
<!-- End white rabbit -->   

<!-- Wonderland -->
<template id="R20">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="wonderland"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="wonderland"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>    

<template id="R20_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="wonderland"/>
    </preconditions>
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="wonderland"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>     
<!-- End Wonderland -->  

<!-- Mouse -MT -->        
<template id="R17">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mouse"/>
    </preconditions>        
    <effects> 


        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="identity"/>
        <update name="$userstates.intent.subject" value="mouse"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>

<template id="R17_1">
    <preconditions>
        <compare value1="$userstates.utterance.consumers" comparator="not_contains" value2="rules" /> 
        <compare value1="$dialoguestates.topic.value" value2="infoRetrieval" />
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="opinion"/>            
        <compare value1="$userstates.utterance.pos" comparator="contains" value2="mouse"/>
    </preconditions>        
    <effects> 
        <update name="$userstates.intent.ts" value="$util.timestamp.now"/> 
        <update name="$userstates.intent.function" value="setQuestion" />
        <update name="$userstates.intent.type" value="opinion"/>
        <update name="$userstates.intent.subject" value="mouse"/>
        <update name="$userstates.utterance.consumers._addlast" value="rules" />
    </effects>
</template>    


<!-- End mouse -->  
</behaviourtemplates>